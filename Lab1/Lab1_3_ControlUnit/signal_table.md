#### ALU三位输入的作用

| $F_{2:0}$ | Function |
| :-------: | :------: |
|    000    |   A&B    |
|    001    |   A\|B   |
|    010    |   A+B    |
|    011    | not used |
|    100    |   A&~B   |
|    101    |  A\|~B   |
|    110    |   A-B    |
|    111    |   SLT    |

#### ALUop，meaning and ALUcontrol output

| ALUOP | Meaning  |
| :---: | :------: |
|  000  |   ADD    |
|  001  | subtract |
|  010  |   slt    |
|  011  |    or    |
|  100  |   and    |
|  101  |   sll    |
|  110  |  funct   |
|  111  | not use  |

###  

| $ALUOP_{1:0}$ |    Funct    | $ALUControl_{2:0}$ |
| :-----------: | :---------: | :----------------: |
|      11x      | 100000(add) |      010(add)      |
|      11x      | 100010(sub) |      110(sub)      |
|      11x      | 100100(and) |      000(and)      |
|      11x      | 100101(or)  |      001(or)       |
|      11x      | 101010(slt) |      111(slt)      |
|      11x      | 111111(sll) |      100(sll)      |

到这边alu decoder的逻辑已经好了

#### 然后就是mainDecoder

| Instruction |   op   | RegWrite | RegDst | AluSrc | Branch | MenWrite | MenToReg | ALUOp | Jump |
| :---------: | :----: | :------: | :----: | :----: | :----: | :------: | :------: | ----- | ---- |
|   R-type    | 000000 |    1     |   1    |   0    |   0    |    0     |    0     | 110   | 0    |
|     lw      | 100011 |    1     |   0    |   1    |   0    |    0     |    1     | 000   | 0    |
|     sw      | 101011 |    0     |   x    |   1    |   0    |    1     |    x     | 000   | 0    |
|    addi     | 001000 |    1     |   0    |   1    |   0    |    0     |    0     | 000   | 0    |
|     beq     | 000100 |    0     |   x    |   0    |   1    |    0     |    x     | 001   | 0    |
|      j      | 000010 |    0     |   x    |   x    |   x    |    0     |    x     | xxx   | 1    |
|     ori     | 001101 |    1     |   0    |   1    |   0    |    0     |    0     | 011   | 0    |
|    andi     | 000110 |    1     |   0    |   1    |   0    |    0     |    0     | 100   | 0    |
|    slti     | 001010 |    1     |   0    |   1    |   0    |    0     |    0     | 010   | 0    |
|     nop     | 111111 |    1     |   0    |   1    |   0    |    0     |    0     | 101   | 0    |

这边比较特殊的是nop，根据查到的资料，nop=sll \$0,\$0,0,但是我找不到当前结构下sll的信息，无奈之下我把sll指定了一个funct code来实现nop。

由于操作立即数的指令是放不下funct位的，所以需要扩展ALUop到三位